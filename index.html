<!doctype html>
<html ng-app="HeistCast">
<head>
	<meta charset="UTF-8">
	<title>HeistCast</title>
	<link rel="stylesheet" href="style.css">

	<meta name="viewport" content="width=device-width">

	<script src='https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js'></script>
	<script src='https://cdn.firebase.com/v0/firebase.js'></script>
	<script src='https://cdn.firebase.com/libs/angularfire/0.5.0/angularfire.min.js'></script>
</head>
<body ng-controller="ListController">
	
	<img src="heist-logo.svg" alt="HeistCast" class="logo">

	<table>
		<tr ng-repeat="(id, entry) in list">
			<td>{{entry.title}}</td>
			<td><a href="{{entry.body}}">{{entry.body}}</a><button ng-click="removeEntry(id)">âœ•</button></td>
		</tr>
	</table>

	<fieldset>	
		<input type="text" ng-model="name" ng-keydown="addLink($event)" placeholder="Prototype Name" autofocus>
	    <input type="text" ng-model="link" ng-keydown="addLink($event)" placeholder="Invision Link">
	</fieldset>

	<script>
		var app = angular.module("HeistCast", ["firebase"]);

		function ListController($scope, $firebase) {
			var cloud = new Firebase("https://heistcast.firebaseio.com/");
			var list = $scope.list = $firebase(cloud);
			
			$scope.addLink = function(e) {
				if (e.keyCode === 13) {
					list.$add({title: $scope.name, body: $scope.link});
					$scope.link = "";
					$scope.name = "";
				}
			};
			
			$scope.removeEntry = function(id) {
			    list.$remove(id);
			}
		}
	</script>
</body>
</html>